{"version":3,"sources":["webpack:///static/js/3.6b21328f313cd7eac961.js","webpack:///./src/components/around.vue?68df","webpack:///./src/components/around.vue","webpack:///around.vue","webpack:///./src/components/around.vue?2c03","webpack:///./src/components/around.vue?7d10"],"names":["webpackJsonp","103","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticStyle","width","height","attrs","message","backUrl","_v","id","staticClass","_l","button","index","key","class","footer_button","active","isActive","on","click","$event","clickItem","buttons","_s","title","list","name","distance","listClose","listOpen","listCount","staticRenderFns","77","__webpack_require__","Component","86","__webpack_exports__","Object","defineProperty","value","map","placeSearch","self","placeSearchOptions","marker","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","n","__WEBPACK_IMPORTED_MODULE_1_AMap__","__WEBPACK_IMPORTED_MODULE_1_AMap___default","buttonsIcon","mapListText","num","poisArrCopy","numIndex","components","mounted","a","resolve","reject","init","then","searchData","callback","demo","setTimeout","glob","getClass","data","listText","center","lng","lat","methods","Map","resizeEnable","zoom","plugin","addControl","ToolBar","keyWords","pageSize","pageIndex","city","visible","service","clearMap","PlaceSearch","i","length","searchNearBy","status","result","_result","pois","poiList","copyWithin","push","console","log","onClick","document","getElementsByClassName","style","visibility","e","forEach","Marker","icon","position","location","offset","Pixel","zIndex","clickable","event","addListener","90","version","sources","names","mappings","file","sourceRoot","94","content","locals"],"mappings":"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","file":"static/js/3.6b21328f313cd7eac961.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 103:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }, [_c('header-item', {\n    attrs: {\n      \"message\": \"地图周边\",\n      \"backUrl\": \"/\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"90%\"\n    },\n    attrs: {\n      \"id\": \"container\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"footer_map_buttons\"\n  }, _vm._l((_vm.buttons), function(button, index) {\n    return _c('button', {\n      key: button.id,\n      class: [_vm.footer_button, {\n        active: button.isActive\n      }],\n      on: {\n        \"click\": function($event) {\n          _vm.clickItem(index, _vm.buttons)\n        }\n      }\n    }, [_vm._v(_vm._s(button.title) + \"\\n\\n    \")])\n  })), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"panel\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"content\"\n  }, [_c('div', {\n    staticClass: \"content-top\"\n  }, _vm._l((_vm.listText), function(list) {\n    return _c('div', [_c('span', [_vm._v(_vm._s(list.name))]), _c('span', [_vm._v(_vm._s(list.distance + '米'))])])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"content-bottom\",\n    on: {\n      \"click\": _vm.listClose\n    }\n  }, [_vm._v(\"x\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"list-button\",\n    on: {\n      \"click\": _vm.listOpen\n    }\n  }, [_c('div', [_vm._v(\"(\" + _vm._s(_vm.listCount) + \")\")]), _vm._v(\" \"), _c('div', [_vm._v(\"查看列表\")])])], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 77:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(94)\n\nvar Component = __webpack_require__(20)(\n  /* script */\n  __webpack_require__(86),\n  /* template */\n  __webpack_require__(103),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 86:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_AMap__ = __webpack_require__(107);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_AMap___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_AMap__);\n\n\n\n\nvar buttonsIcon = [{ title: '交通', click: false, isActive: true }, { title: '生活', click: false, isActive: false }, { title: '医疗', click: false, isActive: false }, { title: '学校', click: false, isActive: false }];\nvar mapListText = [];\n\nvar map, placeSearch, self, placeSearchOptions, listCount, marker;\n\nvar num = [];\nvar poisArrCopy = [];\nvar numIndex = 0;\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  components: {},\n  mounted: function mounted() {\n    var _self = this;\n    var promise = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n      _self.init();\n      resolve();\n    });\n    promise.then(function () {\n      _self.searchData(_self.callback);\n      _self.demo();\n    }).then(function () {\n      setTimeout(function () {\n        var firstBtn = _self.glob.getClass('footer_button')[0];\n        firstBtn.click();\n      }, 300);\n    });\n  },\n  data: function data() {\n    self = this;\n    return {\n      buttons: buttonsIcon,\n      listCount: listCount,\n      listText: mapListText,\n      center: { lng: 0, lat: 0 },\n      num: num,\n      footer_button: 'footer_button'\n    };\n  },\n\n  methods: {\n    init: function init() {\n      map = new __WEBPACK_IMPORTED_MODULE_1_AMap___default.a.Map('container', {\n        center: [121.52710487067272, 31.22889232359548],\n        resizeEnable: false,\n        zoom: 5\n      });\n\n      __WEBPACK_IMPORTED_MODULE_1_AMap___default.a.plugin(['AMap.Geolocation', 'AMap.PlaceSearch', 'AMap.ToolBar'], function () {\n        map.addControl(new __WEBPACK_IMPORTED_MODULE_1_AMap___default.a.ToolBar());\n      });\n    },\n    searchData: function searchData(callback) {\n      var keyWords = ['地铁线路', '大型购物广场', '三甲医院', '学校'];\n      var distance = [1000, 3000, 3000, 3000];\n\n      placeSearchOptions = {\n        pageSize: 10,\n        pageIndex: 1,\n        city: '021',\n        map: map,\n        visible: false\n      };\n      __WEBPACK_IMPORTED_MODULE_1_AMap___default.a.service('AMap.PlaceSearch', function () {\n        map.clearMap();\n        placeSearch = new __WEBPACK_IMPORTED_MODULE_1_AMap___default.a.PlaceSearch(placeSearchOptions);\n        for (var i = 0; i < keyWords.length; i++) {\n          placeSearch.searchNearBy(keyWords[i], [121.44343879031237, 31.207570983863118], distance[i], callback);\n        }\n      });\n      return callback;\n    },\n    callback: function callback(status, result) {\n      var promise = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        var _result = result;\n        var pois = _result.poiList.pois;\n        poisArrCopy = pois.copyWithin(0);\n        self.num.push(poisArrCopy);\n\n        resolve();\n      });\n      promise.then(function () {\n        console.log('Resolved.');\n        return self.demo();\n      });\n    },\n    onClick: function onClick() {\n      console.log('on item click:');\n    },\n    listClose: function listClose() {\n      var content = document.getElementsByClassName('content')[0];\n      content.style.visibility = 'hidden';\n    },\n    listOpen: function listOpen() {\n      var content = document.getElementsByClassName('content')[0];\n      content.style.visibility = 'visible';\n    },\n\n    demo: function demo() {\n      numIndex++;\n      if (numIndex > 4) {\n        if (self.num.length > 0) {\n          return map.clearMap();\n        }\n      }\n    },\n\n    clickItem: function clickItem(index, buttons) {\n      map.clearMap();\n      buttons.forEach(function (e, index) {\n        e.isActive = false;\n      });\n      buttons[index].isActive = true;\n      self.listCount = self.num[index].length;\n      self.listText = self.num[index];\n      function onClick(e) {\n        console.log(e);\n      }\n      for (var i = 0; i < self.num[index].length; i++) {\n        marker = new __WEBPACK_IMPORTED_MODULE_1_AMap___default.a.Marker({\n          title: 'abc',\n          icon: 'https://webapi.amap.com/theme/v1.3/markers/n/mark_b' + (i + 1) + '.png',\n          position: [self.num[index][i].location.lng, self.num[index][i].location.lat],\n          offset: new __WEBPACK_IMPORTED_MODULE_1_AMap___default.a.Pixel(-24, 5),\n          zIndex: 1,\n          map: map,\n          clickable: true\n        });\n        __WEBPACK_IMPORTED_MODULE_1_AMap___default.a.event.addListener(marker, 'click', onClick);\n      }\n      return marker;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 90:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(84)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"around.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(90);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(85)(\"a3a3e47e\", content, true);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.6b21328f313cd7eac961.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }, [_c('header-item', {\n    attrs: {\n      \"message\": \"地图周边\",\n      \"backUrl\": \"/\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"90%\"\n    },\n    attrs: {\n      \"id\": \"container\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"footer_map_buttons\"\n  }, _vm._l((_vm.buttons), function(button, index) {\n    return _c('button', {\n      key: button.id,\n      class: [_vm.footer_button, {\n        active: button.isActive\n      }],\n      on: {\n        \"click\": function($event) {\n          _vm.clickItem(index, _vm.buttons)\n        }\n      }\n    }, [_vm._v(_vm._s(button.title) + \"\\n\\n    \")])\n  })), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"panel\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"content\"\n  }, [_c('div', {\n    staticClass: \"content-top\"\n  }, _vm._l((_vm.listText), function(list) {\n    return _c('div', [_c('span', [_vm._v(_vm._s(list.name))]), _c('span', [_vm._v(_vm._s(list.distance + '米'))])])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"content-bottom\",\n    on: {\n      \"click\": _vm.listClose\n    }\n  }, [_vm._v(\"x\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"list-button\",\n    on: {\n      \"click\": _vm.listOpen\n    }\n  }, [_c('div', [_vm._v(\"(\" + _vm._s(_vm.listCount) + \")\")]), _vm._v(\" \"), _c('div', [_vm._v(\"查看列表\")])])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-05ad8a0b\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/around.vue\n// module id = 103\n// module chunks = 3","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-05ad8a0b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./around.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./around.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-05ad8a0b\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./around.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/around.vue\n// module id = 77\n// module chunks = 3","\n<!--高德地图测试-->\n<template>\n  <div style=\"width:100%; height:100%\">\n    <!--    <header-item message=\"景瑞城北公园\" backUrl=\"/\"></header-item>-->\n    <header-item message=\"地图周边\" backUrl=\"/\"></header-item>\n    <div id=\"container\" style=\"width:100%; height:90%\"></div>\n    <div class=\"footer_map_buttons\">\n      <button v-for=\"(button, index) in buttons\" :key=\"button.id\" @click=\"clickItem(index ,buttons)\"\n              v-bind:class=\"[footer_button, {active: button.isActive}]\">{{button.title}}\n\n      </button>\n    </div>\n    <div id=\"panel\"></div>\n    <div class=\"content\">\n      <div class=\"content-top\">\n        <div v-for=\"list in listText\"><span>{{list.name}}</span><span>{{list.distance + '米'}}</span></div>\n      </div>\n      <div class=\"content-bottom\" @click=\"listClose\">x</div>\n    </div>\n    <div class=\"list-button\" @click=\"listOpen\">\n      <div>({{listCount}})</div>\n      <div>查看列表</div>\n    </div>\n  </div>\n</template>\n<script>\n  import AMap from 'AMap'\n  const buttonsIcon = [\n    {title: '交通', click: false, isActive: true},\n    {title: '生活', click: false, isActive: false},\n    {title: '医疗', click: false, isActive: false},\n    {title: '学校', click: false, isActive: false}\n  ]\n  var mapListText = []\n  //  var geolocation, markers\n  var map, placeSearch, self, placeSearchOptions, listCount, marker\n  //  var poisArrr\n  var num = []\n  var poisArrCopy = []\n  var numIndex = 0\n  export default {\n    components: {},\n    mounted: function () {\n      let _self = this\n      let promise = new Promise(function (resolve, reject) {\n        _self.init()\n        resolve()\n      })\n      promise.then(function () {\n        _self.searchData(_self.callback)\n        _self.demo()\n      }).then(function () {\n        setTimeout(function () {\n          let firstBtn = _self.glob.getClass('footer_button')[0]\n          firstBtn.click()\n        }, 300)\n      })\n    },\n    data () {\n      self = this\n      return {\n        buttons: buttonsIcon,\n        listCount: listCount,\n        listText: mapListText,\n        center: {lng: 0, lat: 0},\n        num: num,\n        footer_button: 'footer_button'\n      }\n    },\n    methods: {\n      init: function () {\n        map = new AMap.Map('container', {\n          center: [121.52710487067272, 31.22889232359548],\n          resizeEnable: false,\n          zoom: 5\n        })\n        /*       var icon = new AMap.Icon({\n         image: 'http://vdata.amap.com/icons/b18/1/2.png',\n         size: new AMap.Size(24, 24)\n         }) */\n        AMap.plugin(['AMap.Geolocation', 'AMap.PlaceSearch', 'AMap.ToolBar'],\n          function () {\n            map.addControl(new AMap.ToolBar())\n          })\n      },\n      searchData: function (callback) {\n        let keyWords = ['地铁线路', '大型购物广场', '三甲医院', '学校']\n        let distance = [1000, 3000, 3000, 3000]\n        // …………………………………………………………周边分类…………………………………………………………………………………………………………\n        placeSearchOptions = { // 构造地点查询类\n          pageSize: 10,\n          pageIndex: 1,\n          city: '021', // 城市\n          map: map,\n          visible: false\n        }\n        AMap.service('AMap.PlaceSearch', function () {\n          map.clearMap()  // 清除地图覆盖物\n          placeSearch = new AMap.PlaceSearch(placeSearchOptions)\n          for (let i = 0; i < keyWords.length; i++) {\n            placeSearch.searchNearBy(keyWords[i], [121.44343879031237, 31.207570983863118], distance[i], callback)\n          }\n        })\n        return callback\n      },\n      callback: function (status, result) {\n        var promise = new Promise(function (resolve, reject) {\n          let _result = result\n          const pois = _result.poiList.pois\n          poisArrCopy = pois.copyWithin(0)\n          self.num.push(poisArrCopy)\n//          self.listText = pois\n//          self.listCount = _result.poiList.count\n//          placeSearch.M.pageSize = 10\n          resolve()\n        })\n        promise.then(function () {\n          console.log('Resolved.')\n          return self.demo()\n        })\n      },\n      onClick () {\n        console.log('on item click:')\n      },\n      listClose () {\n        let content = document.getElementsByClassName('content')[0]\n        content.style.visibility = 'hidden'\n      },\n      listOpen () {\n        let content = document.getElementsByClassName('content')[0]\n        content.style.visibility = 'visible'\n      },\n      demo: function () {\n        numIndex++\n        if (numIndex > 4) {\n          if (self.num.length > 0) {\n            return map.clearMap()  // 清除地图覆盖物\n          }\n        }\n      },\n      /*  注册每项的点击事件,默认显示num0，也就是交通，实际上所有的数据已经请求到了，点击按钮只是用来切换maker */\n      clickItem: function (index, buttons) {\n        map.clearMap()  // 清除地图覆盖物\n        buttons.forEach(function (e, index) {\n          e.isActive = false\n        })\n        buttons[index].isActive = true\n        self.listCount = self.num[index].length\n        self.listText = self.num[index]\n        function onClick (e) {\n          console.log(e)\n        }\n        for (let i = 0; i < self.num[index].length; i++) {\n          marker = new AMap.Marker({\n//            content: 'div',\n            title: 'abc',\n            icon: 'https://webapi.amap.com/theme/v1.3/markers/n/mark_b' + (i + 1) + '.png',\n            position: [self.num[index][i].location.lng, self.num[index][i].location.lat],\n            offset: new AMap.Pixel(-24, 5),\n            zIndex: 1,\n            map: map,\n            clickable: true\n          })\n          AMap.event.addListener(marker, 'click', onClick)\n        }\n        return marker\n      }\n    }\n  }\n</script>\n<style lang=\"less\">\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// around.vue?bc75b49a","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"around.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-05ad8a0b\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader/dist?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/around.vue\n// module id = 90\n// module chunks = 3","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-05ad8a0b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/less-loader/dist/index.js?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./around.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"a3a3e47e\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-05ad8a0b\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader/dist?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/around.vue\n// module id = 94\n// module chunks = 3"],"sourceRoot":""}